<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Chat</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Belanosima:wght@400;600;700&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    html {
      background: #222;
    }

    body {
      display: flex;
      width: 100vw;
      height: 100vh;
      flex-direction: column;
    }

    #audio {
      position: relative;
      transform-origin: left;
      text-wrap: nowrap;
      z-index: inherit;
      overflow: visible;
      margin-left: .2em;
      flex: 0 1 auto;
      overflow: hidden;
    }

    #notification-input {
      flex-basis: 100%;
    }

    #chat,
    #account {
      background: #111;
      flex: 1 1 auto;
      width: 100%;
      overflow-x: hidden;
      overflow-y: auto;
    }

    #ecg {
      border: none;
      position: relative;
      height: 70px;
      flex: 0 0 auto;
    }

    #tabs {
      vertical-align: bottom;
      align-self: flex-end;
    }

    .tab {
      border-radius: .3em .3em 0 0;
      margin-bottom: 0;
      box-shadow: none;
      border-bottom: none;
      vertical-align: bottom;
    }

    .tab:not(.active) {
      opacity: 0.6;
    }

    #youtube-link,
    #twitch-link,
    #discord-link {
      font-family: 'Belanosima', monospace;
    }

    #music {
      box-sizing: border-box;
      width: 100%;
      padding: .5em;
      display: flex;
      flex-direction: column;
    }
  </style>
</head>

<body>
  <div id="alert">
    <div id="alert-content"></div>
  </div>
  <div id="toolbar">
    <div class="break"></div>
    <a class="button canvas-bg" href="https://twitch.tv/maf_pl" target="_blank"><canvas id="ecg-Twitch" width="20" height="20"></canvas><img src="twitch.svg" style="height: 1em; vertical-align: middle;"></a>
    <a class="button canvas-bg" href="https://www.youtube.com/@MarekRogalski/streams" target="_blank"><canvas id="ecg-YouTube" width="20" height="20"></canvas><img src="youtube.svg" style="height: 1em; vertical-align: middle; margin-bottom: 6px"></a>
    <div class="expand">
    </div>
    <div id="tabs"><button class="tab" data-tab="info">Info</button><button class="tab" data-tab="account">Account</button><button class="tab active" data-tab="chat_tab">Chat</button></div>
  </div>
  <hr>
  <div id="pages">
    <div id="info">
        <h2>What are we doing here?</h2>
        <p>We're writing a game that can play other games. Basically an automation tool, but fun to use. Here is our current <a href="https://www.tldraw.com/f/yNXUP8lZIZlDN9W-44hT-?d=v-449.194.4287.2217.page">roadmap</a>.</p>

        <p>You can check it out (and download a pretty but somewhat buggy development build) at <a href="https://automat.org">automat.org</a>.</p>

      <h2>Schedule</h2>
      <p>I'm streaming on <strong>Mon</strong>, <strong>Wed</strong> and <strong>Fri</strong> between <strong>11:00</strong> and <strong>15:00</strong> <a href="https://time.is/Warsaw">Warsaw Time</a> (same as most of Europe). I'm trying to keep an up-to-date <a href="https://www.twitch.tv/maf_pl/schedule">Twitch schedule</a>.</p>

      <h2>Chat</h2>
      <p>‚û§ This webpage cannot be used to post chat messages (yet). There are three places where chat messages can be posted from: <a href="https://www.youtube.com/@MarekRogalski/live">YouTube</a>, <a href="https://www.twitch.tv/maf_pl">Twitch</a> & <a href="https://discord.com/invite/MRfuBBvdjV">Discord</a> (#working channel).</p>
      <p>‚û§ All chat is TTS-ed so prefer long-form comments instead of short exclamations</p>
      <p>‚û§ Use English if possible</p>
      <p>‚û§ We mostly talk about tech & Automat</p>
      <p>‚û§ Tweak your TTS voice in the "Account" tab</p>

      <h2>Links</h2>
      <p>üåü Star on GitHub: <a href="https://github.com/mafik/automat">github.com/mafik/automat</a></p>
      <p>üëæ Join Discord: <a href="https://discord.com/invite/MRfuBBvdjV">invite</a></p>

      <p><strong>Progress reports:</strong></p>
      <p>ü¶ã Bluesky: <a href="https://bsky.app/profile/mrogalski.eu">@mrogalski.eu</a></p>
      <p>ü¶£ Mastodon: <a href="https://101010.pl/@maf">maf@101010.pl</a></p>

      <p><strong>Stream notifications:</strong></p>
      <p>ü¶ã Bluesky: <a href="https://bsky.app/profile/automat.org">@automat.org</a></p>
      <p>ùïè / Twitter: <a href="https://twitter.com/mafikpl">@mafikpl</a></p>

      <details style="margin-left: 10px;">
          <summary style="font-size: 1.5em; margin-top: .8em; font-weight: bold; cursor: pointer">Streaming Setup</summary>

          <h2>Main PC:</h2>
          <p><strong>OS</strong>: Gentoo Linux with chroot directories for other distributions - Ubuntu, Debian</p>
          <p><strong>Motherboard</strong>: X670E Steel Legend</p>
          <p><strong>CPU</strong>: AMD Ryzen 5 8500G</p>
          <p><strong>RAM</strong>: 64GB GoodRam DDR4</p>
          <p><strong>GPU</strong>: <a href="https://www.youtube.com/watch?v=w_KEnvhdxBM">Dell RTX 4090</a></p>
          <p><strong>KVM software</strong>: <a href="https://github.com/debauchee/barrier">Barrier</a></p>

          <h2>Windows PC:</h2>
          <p>Thinkpad X1 Nano (Gen. 2)</p>
          <p><strong>Software</strong>: OBS + Teleport plugin</p>

          <h2>Streaming PC:</h2>
          <p><strong>OS</strong> Windows 10</p>
          <p><strong>GPU</strong> Nvidia 1080 (Gigabyte)</p>
          <p><strong>RAM</strong> 64GB DDR3</p>
          <p><strong>CPU</strong> Intel 7700k</p>
          <p><strong>Capture</strong>cards*: Elgato HD60 (don't buy - only works on Windows), Elgato CamLink 4k, Unknown 1080p USB recorder</p>
          <p><strong>Software</strong> OBS, <a href="https://github.com/mafik/streambot">Streambot</a></p>

          <h2>Recording:</h2>
          <p><strong>Main camera</strong>: Sony A7C (stock lens)</p>
          <p><strong>Desk camera</strong>: GoPro Hero 4</p>
          <p><strong>Microphone</strong>: HyperX QuadCast</p>
          <p><strong>Light</strong>: Unknown USB ring light</p>
      </details>

      <h2>Music</h2>
      <p>The stream uses copyrighted music, licensed from ZAiKS (a Polish copyright monopolist).</p>
      <p>Unfortunately, both YouTube and Twitch allow copyright trolls to send fake takedown requests.</p>
      <p>Because of their 3-strikes policy and negligence in validating copyright claims, audio streams on YouTube & Twitch are substituted with some free ambient sounds. Credits for those sounds goes to <a href="https://freesound.org/people/Boryslaw_Kozielski/">Borysaw Kozielski</a>.</p>

      <p>Current track:
        <span id="audio"><span id="audio-highlight">No song playing</span><span id="audio-shadow">No song playing</span><span id="audio-fill">No song playing</span></span>
      </p>


    </div>
    <div id="account">
      <p>Paste this command into YouTube, Twitch, or Discord chat to authenticate:</p>
      <input id="login-command" type="text" placeholder="Login command" value="!login" style="font-family: inherit" size="30">
      <button onclick="CopyLoginCommand()" style="cursor:copy">Copy</button>
      <p>YouTube: <span id="youtube-link">Not linked</span></p>
      <p>Twitch: <span id="twitch-link">Not linked</span></p>
      <p><a href="https://discord.com/channels/1198996867053264897/1198996867871162401" target="_blank">Discord</a>: <span id="discord-link">Not linked</span></a></p>
      <p><small>Note on using multiple browsers: Authenticating account in a new browser will automatically
          deauthenticate it from all the others. Instead copy
          <code>localStorage.password</code> to authenticate multiple browsers.</small></p>
      <p>Voice: <span id="voices" class="select"><button class="selected" onclick="LoadVoices()">default</button></span>
      </p>
    </div>
    <div id="chat_tab">
        <div id="admin" style="display: grid; grid-template-rows: 1fr 1fr auto auto;">
            <div id="post" style="display: flex; flex-grow: 1; flex-wrap: wrap;">
            <input id="post-input" placeholder="Post message" style="flex-grow: 1;">
            <button id="post-submit" onclick="ws.send(JSON.stringify({ call: 'Post', args: [document.getElementById('post-input').value] }));">Post</button>
            </div>
            <div id="title" style="display: flex; flex-grow: 1; flex-wrap: wrap;">
            <input id="title-input" placeholder="Stream title" style="flex-grow: 1;">
            <button id="title-submit" onclick="ws.send(JSON.stringify({ call: 'SetTitle', args: [document.getElementById('title-input').value] }));">Update</button>
            </div>
            <div style="display: grid; grid-auto-columns: 1fr; grid-auto-flow: column; text-align: center;">
            <button onclick="ws.send(JSON.stringify({ call: 'MicroblogNotify', args: [] }));">Notify <img src="twitter.svg" style="height: 1em; vertical-align: baseline; margin-bottom: -5px"></button>
            <a class="nobutton" href="https://dashboard.twitch.tv/popout/u/maf_pl/stream-manager/edit-stream-info" target="_blank"><img src="twitch.svg" style="height: 1em; vertical-align: middle;">Dashboard</a>
            <a class="nobutton" href="https://studio.youtube.com/channel/UCBPKTkmfqWCVnrEv8CBPrbg/livestreaming/dashboard?c=UCBPKTkmfqWCVnrEv8CBPrbg" target="_blank"><img src="youtube.svg" style="height: 1em; vertical-align: middle; margin-bottom: 6px">Studio</a>
            </div>
        </div>
        <div id="chat">Connecting...</div>
    </div>
  </div>
  <div class="window" id="livestream">
      <div class="title">LIVE <button class="close">X</button>
      </div><iframe
            class="content"
            id="stream"
            src="https://owncast.automat.org/embed/video"
            title="Stream"
            height="350px" width="550px"
            referrerpolicy="unsafe-url"
            allowfullscreen>
        </iframe></div>
  <script src="anime.min.js"></script>
  <script src="script.js"></script>
</body>

</html>
